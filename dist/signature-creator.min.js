!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).signatureCreator=t()}(this,(function(){"use strict";var e={makeSignatureEditor:function(c,u){(function(n){for(var o of Object.keys(t))null==n[o]?e.impl.options[o]=t[o]:e.impl.options[o]=n[o]})(u=u||{}),u=e.impl.options,Promise.resolve(c).then((function(t){!function(t){t.classList.add("signature-container"),"rtl"===e.impl.options.dir&&t.setAttribute("dir",e.impl.options.dir);var n=`<div class="signature">${t.innerHTML}</div>`;t.innerHTML=n,function(t){var n=`<div class="control-buttons preview-mode">\n                    <button class="btn btn-primary save" type="button">\n                    ${e.impl.options.saveBtnLabel}\n                    </button>\n                    <button class="btn btn-outline-primary edit" type="button">\n                    ${e.impl.options.editBtnLabel}\n                    </button>\n                    <button class="btn btn-outline-primary preview" type="button">\n                    ${e.impl.options.previewBtnLabel}\n                    </button>\n                </div>`;t.innerHTML+=n}(t)}(t)})).then((function(){!function(t){t.querySelector(".control-buttons > .save").addEventListener("click",(function(){!function(t){t.querySelector(".control-buttons").classList.add("hide"),document.querySelector("body").style.overflow="hidden";var i=t.querySelector(".control-buttons").classList.contains("edit-mode")?"EditMode":"PreviewMode";r(t,!1),l(t,!1),s(),window.scrollTo(0,0),t.querySelectorAll(".signature p").forEach((function(e){e.innerHTML=e.innerHTML.replace(/ /g,"&nbsp;")})),html2canvas(t.querySelector(".signature")).then((function(t){var n=document.createElement("a");document.body.appendChild(n),n.download=e.impl.options.fileName+".jpg",n.href=t.toDataURL("image/jpeg"),n.target="_blank",n.click()})),t.parentElement.querySelector(".control-buttons").classList.remove("hide"),document.querySelector("body").style.overflow=null,"EditMode"==i?o(t,!1):n(t,!1)}(t)})),t.querySelector(".control-buttons > .edit").addEventListener("click",(function(){o(t)})),t.querySelector(".control-buttons > .preview").addEventListener("click",(function(){n(t)})),t.querySelectorAll(".signature p").forEach((function(e){e.addEventListener("focus",(function(){!function(e){if(document.body.createTextRange){const t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}else console.warn("Could not select text in node: Unsupported browser.")}(e)}))}))}(c)})).then((function(){i(c)}))},impl:{options:{}}},t={dir:"ltr",saveBtnLabel:"Save As Image",editBtnLabel:"Edit Texts",previewBtnLabel:"Preview",fileName:"signature"};function n(e,t){e.querySelector(".control-buttons").classList.add("preview-mode"),e.querySelector(".control-buttons").classList.remove("edit-mode"),l(e,!1),s(),i(e,t)}function o(e,t){r(e,t),e.querySelector(".control-buttons").classList.add("edit-mode"),e.querySelector(".control-buttons").classList.remove("preview-mode"),l(e,!0),window.scrollTo(0,e.querySelector(".signature p").offsetTop,"smooth"),setTimeout((function(){e.querySelector(".signature p").focus(),window.scrollTo(0,e.querySelector(".signature p").offsetTop,"smooth")}),200)}function i(e,t=!0){if(t?e.querySelector(".signature").classList.remove("no-animation"):e.querySelector(".signature").classList.add("no-animation"),e.clientWidth!=e.scrollWidth){document.querySelector("body").style.overflow="hidden";var n=1*e.clientWidth/e.scrollWidth;e.querySelector(".signature").style.transform="scale("+n+")",document.querySelector("body").style.overflow=null,setTimeout((function(){window.scrollTo(0,0,"smooth")}),0)}}function r(e,t=!0){t?e.querySelector(".signature").classList.remove("no-animation"):e.querySelector(".signature").classList.add("no-animation"),e.querySelector(".signature").style.transform=null}function l(e,t){e.querySelectorAll(".signature p").forEach((function(e){e.setAttribute("contenteditable",t)}))}function s(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}return e}));